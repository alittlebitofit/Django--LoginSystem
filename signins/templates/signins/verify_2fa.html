<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Verify 2fa</title>
    </head>

    <body>

        <form action="{% url 'signins:verify2fa' %}" method="post">
            {% csrf_token %}

			{% if incorrect_totp %}
				<p>{{ incorrect_totp }}</p>
			{% elif incorrect_backupcode %}
				<p>{{ incorrect_backupcode }}</p>
			{% endif %}

			<input type="number" id="totpOrbackupcodeId" name="totp">
			<br><br>

			<button type="button" onclick="change_input_method()" id="toggleId">Enter Backup Code instead</button>
			<br><br>

			<input type="submit" name="cancel_verifying_2fa" value="Cancel">
			<br><br>

			<input type="submit" name="verify_2fa" value="Verify">
			<br><br>

        </form>

		<script>
			function change_input_method() {

				console.log("it seems to not be working");

				let input_element = document.querySelector("#totpOrbackupcodeId");
				let toggle_element = document.querySelector("#toggleId");

				if (input_element.type == "number") {
					input_element.type = "text";
					input_element.name = "backupCode";

					toggle_element.textContent = "Enter TOTP instead";
				} else {
					input_element.type = "number";
					input_element.name = "totp";

					toggle_element.textContent = "Enter Backup Code instead";
				}


				console.log("it seems to not be working2");


			}
		</script>

    </body>

</html>
